<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Descargador MP3</title>
<style>
  body { text-align: center; font-family: sans-serif; margin-top: 50px; }
  button { padding: 10px 20px; font-size: 18px; cursor: pointer; }
</style>
</head>
<body>
  <h1>üéµ Descargador de YouTube MP3</h1>
  <p>Haz clic para iniciar el monitoreo del portapapeles.</p>
  <button id="btn">Iniciar monitoreo</button>

  <script>
    const btn = document.getElementById("btn");
    btn.onclick = async () => {
      try {
        const text = await navigator.clipboard.readText();
        if (text.includes("youtube.com") || text.includes("youtu.be")) {
          fetch("/descargar", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ url: text })
          });
          alert("Descargando: " + text);
        } else {
          alert("No hay enlace de YouTube en el portapapeles.");
        }
      } catch {
        alert("‚ö†Ô∏è No se pudo acceder al portapapeles. Permite acceso.");
      }
    };
  </script>
</body>
</html>
